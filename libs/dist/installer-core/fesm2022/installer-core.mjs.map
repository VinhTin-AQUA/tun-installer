{"version":3,"file":"installer-core.mjs","sources":["../../../angular/installer-core/src/lib/models/registry.model.ts","../../../angular/installer-core/src/lib/stores/installer-property.store.ts","../../../angular/installer-core/src/lib/stores/registry.store.ts","../../../angular/installer-core/src/lib/stores/window-info.store.ts","../../../angular/installer-core/src/public-api.ts","../../../angular/installer-core/src/installer-core.ts"],"sourcesContent":["export enum RegistryValueType {\r\n    REG_NONE = 'REG_NONE',\r\n    REG_SZ = 'REG_SZ',\r\n    REG_EXPAND_SZ = 'REG_EXPAND_SZ',\r\n    REG_DWORD = 'REG_DWORD',\r\n    REG_QWORD = 'REG_QWORD',\r\n    REG_BINARY = 'REG_BINARY',\r\n    REG_MULTI_SZ = 'REG_MULTI_SZ',\r\n}\r\n\r\nexport interface RegistryValue {\r\n    name: string; // eg: \"ProductName\"\r\n    type: RegistryValueType; // eg: RegistryValueType.SZ,\r\n    data: string | number | string[] | null; // \"Tun Installer\"\r\n}\r\n\r\nexport interface RegistryKey {\r\n    name: string; // eg: \"CurrentVersion\"\r\n    path: string; // eg: \"HKEY_LOCAL_MACHINE\\\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\"\r\n    values: RegistryValue[];\r\n}\r\n\r\nexport interface RegistryKeys {\r\n    configRegistry: RegistryKey;\r\n    uninstallRegistry: RegistryKey;\r\n}\r\n","import { patchState, signalStore, withMethods, withState } from '@ngrx/signals';\nimport { InstallerProperties } from '../models/installer-properties';\n\nconst initialState: InstallerProperties = {\n    productName: '',\n    icon: '',\n    productVersion: '',\n    publisher: '',\n    supportLink: '',\n    supportEmail: '',\n    comment: '',\n    launchFile: '',\n    runAsAdmin: false,\n    launchApp: false,\n    shortcutInDesktop: {\n        isCreated: false,\n        runAsAdmin: false,\n        runFile: '',\n        shortcutName: '',\n    },\n    shortcutInApplicationShortcut: {\n        isCreated: false,\n        runAsAdmin: false,\n        runFile: '',\n        shortcutName: '',\n    },\n    installationLocation: '',\n};\n\nexport const InstallerPropertyStore = signalStore(\n    {\n        providedIn: 'root',\n    },\n    withState(initialState),\n    withMethods((store) => {\n        function update(updates: Partial<InstallerProperties>) {\n            patchState(store, (currentState) => ({\n                ...updates,\n            }));\n        }\n\n        function getData() {\n            const data: InstallerProperties = {\n                installationLocation: store.installationLocation(),\n                productName: store.productName(),\n                icon: store.icon(),\n                productVersion: store.productVersion(),\n                publisher: store.publisher(),\n                supportLink: store.supportLink(),\n                supportEmail: store.supportEmail(),\n                comment: store.comment(),\n                launchFile: store.launchFile(),\n                runAsAdmin: store.runAsAdmin(),\n                launchApp: store.launchApp(),\n                shortcutInDesktop: store.shortcutInDesktop(),\n                shortcutInApplicationShortcut: store.shortcutInApplicationShortcut(),\n            };\n\n            return data;\n        }\n\n        return {\n            update,\n            getData,\n        };\n    }),\n);\n","import { patchState, signalStore, withMethods, withState } from '@ngrx/signals';\r\nimport { RegistryKey, RegistryKeys, RegistryValue } from '../models';\r\n\r\nconst initialState: RegistryKeys = {\r\n    configRegistry: {\r\n        name: '',\r\n        path: '',\r\n        values: [],\r\n    },\r\n    uninstallRegistry: {\r\n        name: '',\r\n        path: '',\r\n        values: [],\r\n    },\r\n};\r\n\r\nexport const RegistryKeyStore = signalStore(\r\n    {\r\n        providedIn: 'root',\r\n    },\r\n    withState(initialState),\r\n    withMethods((store) => {\r\n        function updateRegistry(update: RegistryKeys) {\r\n            patchState(store, (state) => ({\r\n                ...update,\r\n            }));\r\n        }\r\n\r\n        // function updateConfigRegistry(update: RegistryKeys) {\r\n        //     patchState(store, (state) => ({\r\n        //         configRegistry: {\r\n        //             ...state.configRegistry,\r\n        //             ...update,\r\n        //         },\r\n        //     }));\r\n        // }\r\n\r\n        // function updateUninstallRegistry(update: RegistryKeys) {\r\n        //     patchState(store, (state) => ({\r\n        //         uninstallRegistry: {\r\n        //             ...state.uninstallRegistry,\r\n        //             ...update,\r\n        //         },\r\n        //     }));\r\n        // }\r\n\r\n        function getData() {\r\n            const data: RegistryKeys = {\r\n                configRegistry: store.configRegistry(),\r\n                uninstallRegistry: store.uninstallRegistry(),\r\n            };\r\n            return data;\r\n        }\r\n\r\n        function addValue(key: keyof RegistryKeys, value: RegistryValue) {\r\n            patchState(store, (state) => ({\r\n                [key]: {\r\n                    ...state[key],\r\n                    values: [...state[key].values, value],\r\n                },\r\n            }));\r\n        }\r\n\r\n        function updateValue(\r\n            key: keyof RegistryKeys,\r\n            valueName: string,\r\n            update: Partial<RegistryValue>,\r\n        ) {\r\n            patchState(store, (state) => ({\r\n                [key]: {\r\n                    ...state[key],\r\n                    values: state[key].values.map((v) =>\r\n                        v.name === valueName ? { ...v, ...update } : v,\r\n                    ),\r\n                },\r\n            }));\r\n        }\r\n\r\n        function upsertValue(key: keyof RegistryKeys, value: RegistryValue) {\r\n            patchState(store, (state) => {\r\n                const exists = state[key].values.some((v) => v.name === value.name);\r\n\r\n                return {\r\n                    [key]: {\r\n                        ...state[key],\r\n                        values: exists\r\n                            ? state[key].values.map((v) => (v.name === value.name ? value : v))\r\n                            : [...state[key].values, value],\r\n                    },\r\n                };\r\n            });\r\n        }\r\n\r\n        function removeValue(key: keyof RegistryKeys, valueName: string) {\r\n            patchState(store, (state) => ({\r\n                [key]: {\r\n                    ...state[key],\r\n                    values: state[key].values.filter((v) => v.name !== valueName),\r\n                },\r\n            }));\r\n        }\r\n\r\n        return {\r\n            updateRegistry,\r\n            // updateConfigRegistry,\r\n            // updateUninstallRegistry,\r\n            getData,\r\n            addValue,\r\n            updateValue,\r\n            removeValue,\r\n            upsertValue,\r\n        };\r\n    }),\r\n);\r\n","import { patchState, signalStore, withMethods, withState } from '@ngrx/signals';\r\nimport { WindowInfo } from '../models';\r\n\r\nconst initialState: WindowInfo = {\r\n    title: 'Tun Installer',\r\n    width: 800,\r\n    height: 600,\r\n    startPage: '',\r\n    alwaysOnTop: false,\r\n};\r\n\r\nexport const WindowInfoStore = signalStore(\r\n    {\r\n        providedIn: 'root',\r\n    },\r\n    withState(initialState),\r\n    withMethods((store) => {\r\n        function getData() {\r\n            const data: WindowInfo = {\r\n                title: store.title(),\r\n                width: store.width(),\r\n                height: store.height(),\r\n                startPage: store.startPage(),\r\n                alwaysOnTop: store.alwaysOnTop(),\r\n            };\r\n            return data;\r\n        }\r\n\r\n        function updateValue(value: Partial<WindowInfo>) {\r\n            patchState(store, (currentState) => ({\r\n                ...value,\r\n            }));\r\n        }\r\n\r\n        return {\r\n            getData,\r\n            updateValue,\r\n        };\r\n    }),\r\n);\r\n","/*\n * Public API Surface of installer-core\n */\n\nexport * from './lib/models';\nexport * from './lib/stores';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["initialState"],"mappings":"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"}