<div class="max-h-screen flex">
    <!-- LEFT SIDEBAR : PAGES -->
    <div class="w-60 border-l bg-gray-50 flex flex-col">
        <div class="px-4 py-3 font-semibold border-b">Pages</div>

        <div class="p-3 space-y-3 overflow-y-auto bg-white text-sm">
            @for (section of configSections; track section.id) {
                <!-- Section header -->
                <button
                    class="w-full flex items-center justify-between text-[11px] font-semibold uppercase tracking-wider text-gray-800 px-1 py-1 hover:text-gray-900"
                    (click)="toggleSection(section.id)"
                >
                    {{ section.label }}
                    <span
                        class="transition-transform"
                        [class.rotate-90]="activeSection === section.id"
                    >
                        â–¶
                    </span>
                </button>

                <!-- Section content -->
                @if (activeSection === section.id) {
                    <ul class="space-y-1 pl-2">
                        @for (page of section.pages(); track $index) {
                            <li>
                                <button
                                    (click)="loadPage(page.name, section.id)"
                                    class="w-full text-left px-2 py-1.5 rounded text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition-colors"
                                >
                                    {{ page.name }}
                                </button>
                            </li>
                        }
                    </ul>
                }
            }
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="flex-1 flex flex-col items-center justify-center overflow-hidden bg-gray-300">
        <iframe
            id="viewer"
            #viewer
            class="border border-gray-500 rounded-md"
            [style.width.px]="activeWindow.width"
            [style.height.px]="activeWindow.height"
            scrolling="no"
        ></iframe>
    </div>

    <!-- RIGHT SIDEBAR : EDITOR -->
    <div class="w-50 border-l bg-gray-50 flex flex-col">
        <div class="px-4 py-3 font-semibold border-b">Editor Window</div>

        <div class="p-4 space-y-4 overflow-y-auto">
            <!-- size -->
            <div class="grid grid-cols-2 gap-2">
                <div>
                    <label class="block text-sm font-medium"> Width </label>
                    (<small class="font-semibold text-[0.7rem]">600px-800px</small>)
                    <input
                        type="number"
                        class="w-full px-3 py-2 border rounded"
                        [value]="activeWindow.width"
                        (input)="updateFrameWidth($event)"
                    />
                </div>
                <div>
                    <label class="block text-sm font-medium"> Height </label>
                    (<small class="font-semibold text-[0.7rem]">400px-600px</small>)
                    <input
                        type="number"
                        class="w-full px-3 py-2 border rounded"
                        [value]="activeWindow.height"
                        (input)="updateFrameHeight($event)"
                    />
                </div>
            </div>

            <!-- window title -->
            <div>
                <label class="block text-sm font-medium"> Title </label>
                <input
                    type="text"
                    class="w-full px-3 py-2 border rounded"
                    [value]="activeWindow.title"
                    (input)="updateWindowTitle($event)"
                />
            </div>

            <!-- Start page -->
            <div>
                <label class="block text-sm font-medium"> Start Page </label>
                <input
                    type="text"
                    class="w-full px-3 py-2 border rounded"
                    [value]="activeWindow.startPage"
                    (input)="updateStartPage($event)"
                />
            </div>

            <!-- always on top -->
            <div>
                <label class="block text-sm font-medium"> Always On Top </label>
                <input
                    type="checkbox"
                    class="mt-2"
                    [checked]="activeWindow.alwaysOnTop"
                    (change)="updateAlwaysOnTop($event)"
                />
            </div>

            <!-- actions -->
            <div class="flex gap-2">
                <button
                    (click)="preview()"
                    class="flex-1 px-3 py-2 bg-green-600 text-white rounded"
                >
                    Preview
                </button>
                <button (click)="reset()" class="flex-1 px-3 py-2 bg-red-500 text-white rounded">
                    Reset
                </button>
            </div>

            <div>
                <button (click)="save()" class="w-full px-3 py-2 bg-green-600 text-white rounded">
                    Save
                </button>
            </div>
        </div>
    </div>
</div>
